\documentclass[a4j]{jarticle}

% \usepackage{showkeys}
\usepackage[dvips]{color,graphicx}
\usepackage{amsmath}
\usepackage{amssymb}
%\usepackage[utf8]{inputenc}
%\usepackage[T1]{fontenc}
%\usepackage{times}
%
\usepackage{amsmath,amssymb}
\usepackage{bm}
\usepackage{graphicx}
\usepackage{verbatim}
%
%\makeindex
%
%\setlength{\textwidth}{\fullwidth}
%\setlength{\textheight}{40\baselineskip}
\addtolength{\textheight}{\topskip}
\setlength{\voffset}{-0.55in}
%
\setcounter{tocdepth}{4}
\renewcommand{\contentsname}{\large \centerline{Contents}}

\def\thline{\noalign{\hrule height 1pt}}
%
\title{@Home SPLルールブック}
\author{Family \& Robotics Association}
\date{\today}

\begin{document}
%
%
\maketitle

\begin{center}
ルールに関する問い合わせ先: {\tt tc@familyrobotics.org}
\end{center}

\vspace{3em}
%
%
\tableofcontents
\newpage

\section{はじめに}

\subsection{このルールブックについて}

このルールブックは、RoboCup @Homeに標準ロボットリーグを
設ける提案及び、プレ競技会開催のために書かれるものである。
このルールブックの執筆・管理は、
Family \& Robotics AssociationのTechnical Comittee
（TC）によって行われる。

\section{ロボットの規格}

本リーグは、各チームがほぼ同一の安価なハードウェアを用いる事によって、
ハードウェア調達のコスト・組み立てやチューニングの手間を減らし、
ソフトウェア開発に集中できるようにするために開催するものである。

\subsection{ロボットの構成}

ロボットは、台車、ロボットハンド、Kinect for Xbox 360、及び計算機で構成されることとする。
それらを動作させるための配線や基盤以外のものをロボットに搭載してはならない。
台車、ロボットハンドについては以下のものに限定する。
\begin{itemize}
	\item 台車: Turtlebot2\footnote{http://www.rt-shop.jp/index.php?main\_page=product\_info\&cPath=23\&products\_id=758}
	\item ロボットアーム: Turtlebot2用ロボットアーム ``CRANE'' （クライン）\footnote{http://www.rt-shop.jp/index.php?main\_page=product\_info\&cPath=1\&products\_id=1307}
\end{itemize}
これら商品は、取り扱い説明書の通りに正確に組み立てられていなければならない。

計算機については、Turtlebot2の天板に搭載するものとする。
個数の制限は設けない。寸法については、
計算機の天板からのはみ出しについて制限を設ける。
制限は、
上面から見たときに、天板から最も遠い部分が50[mm]
以内に収まっていなければならないというものとする。

todo: なにか他に制限は？

todo: 寸法等の資料

\subsection{外部の計算機}

ロボットに搭載された計算機はWiFiを用い、
TCによって設置されたWiFiのアクセスポイント
（\ref{sub:network}節参照）を利用して
外部の計算機と通信することが許可される。
外部との通信用のIPアドレスは各チーム2つとし、
2つ使う場合には1つはキーボードのないタブレット型
のものとしなければならない。
各競技のルールで指定の無い限り、競技中にチームのメンバーが
これらの機器に接触したり、
音声で指示したりすることは禁止される。


\section{環境}

\subsection{ロボットの行動する環境}

todo: なるべく簡素にしたほうがいいのか、@Homeの資材を使えるようにした方がよいのか・・・

競技は、一般家庭の部屋に見立てた6[m]$\times$6[m]の環境で行われる。
周囲は最低600[mm]の高さの白い光沢の無い壁で囲まれる。
消防法による制限がない場合は壁の代わりに建物の壁面を利用することがある。
この場合、白壁でない場合には、床から600[mm]以上の高さの白い紙を貼る。
あるいは、建物の壁面を利用することもある。
床にはカーペットが設置される。
カーペットの材質は、Turtlebot2の走行に支障がないものとするが、
標準的なものは本ルールでは指定されない。

\subsection{通信環境}\label{sub:network}

TCによりWiFiの公式アクセスポイントが準備される。
場合によってはインターネットと接続されるが、
その保証はない。
また、公式アクセスポイントの不具合に対する責任は
TCだけではなく各チームのリーダが負うこととし、
競技中に遮断した場合については
リーダーミーティングで対応を行うこととする。

各チームは、最低3個のIPアドレス
（ロボット用、タブレット用、PC用）を利用できる。

試技中においては、
他のチームは公式アクセスポイントの利用を控える。
悪質な場合には、TCあるいはリーダーミーティングによる判断で
失格となる場合がある。

\section{試技}

todo: 完全自律は難しいので半自律の試技を入れてみたがどうか。構成は半自律、自律、フリー演技

\subsection{試技1: これ取って来て}

試技1では、家庭においてロボットに指示を出し、
仕事をしてもらうという課題を扱う。
指示はタブレットPCやモバイルフォンで行い、
タスク完了の有無、指示の量の多寡で評価を行う。

todo: 音声はどうしましょ？

タブレットPCあるいはモバイルフォンからロボットに指示を出し、
ロボットが離れたところから指定されたものを運んでくる試技である。
テーブルを二つ環境に用意し、
一方に操作者、一方にロボットアームが把持できる物体をいくつか置く。


操作者は、タブレットPCを裏返すことで指示していないことを示す。
操作者がタブレットPCに触れている、あるいは表返って置かれている時間を
審判が計測することで、指示の量を定量化する。

todo: 最初は事前にどんな物体があるか教えてもよいかと。

\subsection{試技の流れ}

各チームに与えられる試技の時間は5[min]とする。

\subsection{採点}

\begin{table}
\begin{center}
\caption{試技1の採点基準}
\label{table:test1score}
\begin{tabular}{l|p{5cm}|l|p{5cm}}
\thline
項目 & 条件 & 点数 & 備考\\
\hline
達成度 & 完全に終了 & $+1000$[点] \\
& 物体をつかむまで & $+500$[点] \\
\hline
指示の量 & タブレット等が裏返しでない時間& $-1$[点/s] & 秒以下の計測時間は切り捨て。
途中棄権の場合は、棄権後に残った時間はすべてタブレットを操作していたものとして減点する。\\
\hline
達成時間 & タスク成功後に残った時間 & $+1$[点/s] & 1秒以下の時間は切り捨て\\
\thline
\end{tabular}
\end{center}
\end{table}



\subsection{運営の流れ}

物体については、あるメーカ製の消しゴム等、
日本国内で入手しやすいものとし、
競技会開催決定後、なるべく早い時点でTCが告知しなければならない。

\section{競技会での順位}

\subsection{順位の決定}

競技会における順位は、次のように決定される。
TCは、チーム数や棄権チーム数を勘案し、
優勝からある順位までを表彰するかを競技会に決定する。

\subsubsection{各試技の順位点}

競技会への登録チーム数\footnote{試技への登録チーム数ではないことに注意}を$m$とする。
あるチームの、その試技での得点が上から$n$番目に高いとき、
このチームの、その試技における順位点を
\[
	m - n + 1
\]
点と定義する。つまり、その試技で$1$位であれば$m$点、最下位であれば$1$点となる。
また、試技を棄権した場合には$0$点となる。

また、複数のチームの得点が一緒で$n$位タイであった場合、
同点のチーム数が$\ell$のとき、次のように順位点を計算する。
\[
	\dfrac{\sum_{i=0}^{\ell-1}(n + i)}{\ell}
\]
つまり、4位タイが3チームであれば$(4+5+6)/3=5$[点]ということである。


\subsection{競技会での順位}

各試技の「順位点」の合計で決定する。順位点が同点の場合、
試技3のオープンチャレンジの順位の優劣で順位を決定する。
試技3が同順位の場合は試技2、それも同順位なら試技1の順位で決定する。
試技がすべて同着であれば、同順とする。
例えば、2チームが全く同じ点数で3つの試技を終え、
順位点の合計で4位タイだとすれば、そのまま4位タイとして扱う。
1位タイの場合は両チーム優勝としてよい。


\section{その他表彰}

\subsection{Family \& Robotics賞}

競技会において技術的な新規性、有用性、学術性、
その他特異性が最も顕著であったチームを
TCが1チーム選出し、「Family \& Robotics賞」を与える。
TCは賞の候補チームを選び、
各チームから簡単なヒアリング（立ち話程度でよい）
を行って1チームを選出する。

選出にあたっては、競技会での高順位チームよりも、
下位で目立ったチームを優先することとする。
これは、以下の理由があってのことである。
\begin{itemize}
	\item 高順位のチームはその順位で技術力を既に評価されていること。
	\item 技術的なダイバーシティーを保つためにユニークな発想を優遇しなければならない。
\end{itemize}

\subsection{他団体からの表彰}

他団体からの表彰の申し入れがあった場合、TCが対応する。
積極的に受け入れることとする。

\section{その他}

\subsection{リーダーミーティング}

本リーグは、各チームが主体的に運営することとし、
競技会中は、全チームのリーダーが集まったリーダーミーティングが
最も重要な組織である。
リーダーミーティングの議決は本書のルールの
一時的な改変等、ほぼ全ての事項について効力を発揮する。
ただし、効力の発揮にはTCの了承が必要である。
また、議決の方法も
リーダーミーティングにおいて決定されなければならない。

また、ルールに関するトラブルを避けるため、
競技前にリーダーミーティングにおいてルールの
読み合わせが行われなければならない。


リーダーミーティングには、リーダーでない一般メンバー
もオブザーバーとして参加できる。
また、出席の求めがあった場合、
指名された一般メンバーは参加しなくてはならない。


競技中のトラブルの発生、あるチームの不正疑惑等が発生した場合、
TCメンバー、あるいは任意のチームのリーダーは、
リーダーミーティングを開催する事ができる。
開催のタイミングについては、緊急を要するもの以外は、
観客が入っている時間帯を極力さけるものとする。


%
\end{document}
